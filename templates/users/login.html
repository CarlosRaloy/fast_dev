{% extends "users/base3.html" %}
{% load static %}

{% block head_content %}
    <title>Inicio</title>
    <style>
        /* ==== IMPORTAR TIPOGRAFÍA ==== */
        @import url("https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap");

        /* ==== CONTENEDOR FIJO ==== */
        #toast-achievement {
            position: fixed;
            top: 2rem;
            right: 1rem;
            z-index: 1050;
            font-family: "Inter", sans-serif;
            pointer-events: none;
        }

        /* ==== CUADRO PRINCIPAL ==== */
        #toast-achievement .achievement {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.2rem 1.5rem;
            border-radius: 3rem;
            background: rgba(255, 169, 0, 0.05);
            backdrop-filter: blur(5.5px);
            -webkit-backdrop-filter: blur(5.5px);
            color: oklch(0.967 0.001 286.375);
            border: 1px solid color-mix(in hsl, #e5b600, black 70%);
            overflow: hidden;
            animation: toast-float 4s ease-in-out infinite;
        }

        @keyframes toast-float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        /* ==== SPARKS ==== */
        #toast-achievement .spark-container {
            position: absolute;
            inset: 0;
            z-index: 1;
        }

        #toast-achievement .spark {
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            animation: spark-anim 5s linear infinite both;
        }

        @keyframes spark-anim {
            0% {
                opacity: 0;
                transform: scale(0) rotate(-180deg);
            }
            8% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
            12% {
                opacity: 1;
                transform: scale(1) rotate(90deg);
            }
            16%, 100% {
                opacity: 0;
                transform: scale(0) rotate(180deg);
            }
        }

        #toast-achievement .spark:nth-child(1) {
            --spark-size: 12px;
            top: 10%;
            left: 10%;
        }

        #toast-achievement .spark:nth-child(2) {
            --spark-size: 14px;
            animation-delay: 200ms;
            top: 35%;
            left: 100%;
        }

        #toast-achievement .spark:nth-child(3) {
            --spark-size: 10px;
            animation-delay: 400ms;
            top: 95%;
            left: 20%;
        }

        #toast-achievement .spark svg {
            width: var(--spark-size);
            height: var(--spark-size);
        }

        /* ==== ICONO CENTRAL ==== */
        #toast-achievement .icon-outer-container {
            position: relative;
            z-index: 2;
        }

        #toast-achievement .icon-inner-container {
            display: grid;
            place-items: center;
            width: 4.5rem;
            height: 4.5rem;
            border-radius: 50%;
            background-image: radial-gradient(
                    circle at center,
                    oklch(0.852 0.199 91.936) 80%,
                    oklch(0.476 0.114 61.907) 100%
            );
            overflow: hidden;
        }

        #toast-achievement .icon {
            display: grid;
            place-items: center;
            width: 4rem;
            padding: .6rem;
            border-radius: inherit;
            background-color: oklch(0.75 0.183 55.934);
            box-shadow: 0 0 10px hsl(from oklch(0.266 0.079 36.259) h s l / 60%) inset,
            0 2px 2px hsl(from oklch(0.266 0.079 36.259) h s l / 30%) inset,
            1px 1px 1px hsl(from oklch(0.967 0.001 286.375) h s l / 50%);
        }

        #toast-achievement .icon svg {
            width: 100%;
            height: 100%;
            color: oklch(0.945 0.129 101.54);
            filter: drop-shadow(0 0 2px oklch(0.554 0.135 66.442));
        }

        /* ==== TEXTO ==== */
        #toast-achievement .content {
            display: flex;
            flex-direction: column;
            z-index: 2;
        }

        #toast-achievement .title {
            font-size: 1rem;
            font-weight: 700;
            line-height: 1.25;
            color: oklch(0.967 0.001 286.375);
        }

        #toast-achievement .description {
            font-size: .875rem;
            opacity: .8;
            color: oklch(0.967 0.001 286.375);
        }
    </style>
{% endblock %}

{# ========== BLOQUE TOAST (justo después de <body>) ========== #}
{% block toast %}
    {% if registrado %}
        <main id="toast-achievement">
            <div class="achievement">
                <div class="icon-outer-container">
                    <div class="spark-container">
                        <div class="spark">
                            <svg viewBox="0 0 24 24">
                                <path fill="currentColor" stroke="currentColor" stroke-linejoin="round"
                                      stroke-width="1.5"
                                      d="M3 12c6.268 0 9-2.637 9-9c0 6.363 2.713 9 9 9
                   c-6.287 0-9 2.713-9 9
                   c0-6.287-2.732-9-9-9Z"/>
                            </svg>
                        </div>
                        <div class="spark">
                            <svg viewBox="0 0 24 24">
                                <path fill="currentColor" stroke="currentColor" stroke-linejoin="round"
                                      stroke-width="1.5"
                                      d="M3 12c6.268 0 9-2.637 9-9c0 6.363 2.713 9 9 9
                   c-6.287 0-9 2.713-9 9
                   c0-6.287-2.732-9-9-9Z"/>
                            </svg>
                        </div>
                        <div class="spark">
                            <svg viewBox="0 0 24 24">
                                <path fill="currentColor" stroke="currentColor" stroke-linejoin="round"
                                      stroke-width="1.5"
                                      d="M3 12c6.268 0 9-2.637 9-9c0 6.363 2.713 9 9 9
                   c-6.287 0-9 2.713-9 9
                   c0-6.287-2.732-9-9-9Z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="icon-inner-container">
                        <div class="icon">
                            <svg viewBox="0 0 24 24">
                                <path fill="currentColor" stroke="currentColor" stroke-linecap="round"
                                      stroke-linejoin="round" stroke-width="1.5"
                                      d="m8.587 8.236l2.598-5.232a.911.911 0 0 1 1.63 0
                   l2.598 5.232l5.808.844a.902.902 0 0 1 .503 1.542
                   l-4.202 4.07l.992 5.75c.127.738-.653 1.3-1.32.952
                   L12 18.678l-5.195 2.716c-.666.349-1.446-.214-1.319-.953
                   l.992-5.75l-4.202-4.07a.902.902 0 0 1 .503-1.54z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="content">
                    <span class="title">Exito !!</span>
                    <span class="description">Usuario Registrado!</span>
                </div>
            </div>
        </main>
    {% endif %}
{% endblock %}

{% block container %}
    {% if error %}
        <p class="alert alert-danger">{{ error }}</p>
    {% endif %}
    <form method="POST" action="{% url 'users:login' %}">
        {% csrf_token %}
        <div class="form-group">
            <input class="form-control" type="text" placeholder="Username" name="username"/>
        </div>
        <div class="form-group">
            <input class="form-control" type="password" placeholder="Password" name="password"/>
        </div>
        <button type="submit" class="btn btn-dark btn-block">Entrada</button>
    </form>
    <br>
    <p class="register">
        Aún no te registras? <a href="{% url 'users:signup' %}">Regístrate Aquí</a>
    </p>
{% endblock %}

{% block scripts %}
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const toast = document.getElementById("toast-achievement");
            if (!toast) return;
            setTimeout(() => {
                toast.style.transition = "opacity 0.5s";
                toast.style.opacity = "0";
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        });
    </script>
{% endblock %}
