{% extends "users/base9.html" %}
{% load static %}

{% block head_content %}
    <title>Inicio</title>
{% endblock %}

{% block extra_css %}
    <link href="{% static 'css/login/toast_login.css' %}" rel="stylesheet">
{% endblock %}

{# ========== BLOQUE TOAST (justo después de <body>) ========== #}
{% block toast %}
    {% if registrado %}
        <main id="toast-achievement">
            <div class="achievement">
                <div class="icon-outer-container">
                    <div class="spark-container">
                        <div class="spark">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path fill="currentColor" stroke="currentColor" stroke-linejoin="round"
                                      stroke-width="1.5"
                                      d="M3 12c6.268 0 9-2.637 9-9c0 6.363 2.713 9 9 9
                         c-6.287 0-9 2.713-9 9
                         c0-6.287-2.732-9-9-9Z"/>
                            </svg>
                        </div>
                        <div class="spark">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path fill="currentColor" stroke="currentColor" stroke-linejoin="round"
                                      stroke-width="1.5"
                                      d="M3 12c6.268 0 9-2.637 9-9c0 6.363 2.713 9 9 9
                         c-6.287 0-9 2.713-9 9
                         c0-6.287-2.732-9-9-9Z"/>
                            </svg>
                        </div>
                        <div class="spark">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path fill="currentColor" stroke="currentColor" stroke-linejoin="round"
                                      stroke-width="1.5"
                                      d="M3 12c6.268 0 9-2.637 9-9c0 6.363 2.713 9 9 9
                         c-6.287 0-9 2.713-9 9
                         c0-6.287-2.732-9-9-9Z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="icon-inner-container">
                        <div class="highlight"></div>
                        <div class="icon">
                            <div class="highlight" style="opacity: .25; z-index: 2;"></div>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path fill="currentColor" stroke="currentColor" stroke-linecap="round"
                                      stroke-linejoin="round" stroke-width="1.5"
                                      d="m8.587 8.236l2.598-5.232a.911.911 0 0 1 1.63 0
                         l2.598 5.232l5.808.844a.902.902 0 0 1 .503 1.542
                         l-4.202 4.07l.992 5.75c.127.738-.653 1.3-1.32.952
                         L12 18.678l-5.195 2.716c-.666.349-1.446-.214-1.319-.953
                         l.992-5.75l-4.202-4.07a.902.902 0 0 1 .503-1.54z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="content">
                    <span class="title">Logro Desbloqueado !!</span>
                    <span class="description">¡Has dado tu primer paso!</span>
                </div>
            </div>
        </main>
    {% endif %}
{% endblock %}

{% block container %}
    {% if error %}
        <p class="alert alert-danger">{{ error }}</p>
    {% endif %}
    <form method="POST" action="{% url 'users:login' %}">
        {% csrf_token %}
        <div class="form-group">
            <input class="form-control" type="text" placeholder="Username" name="username"/>
        </div>
        <div class="form-group">
            <input class="form-control" type="password" placeholder="Password" name="password"/>
        </div>
        <button type="submit" class="btn btn-dark btn-block">Entrada</button>
    </form>
    <br>
    <p class="register">
        Aún no te registras? <a href="{% url 'users:signup' %}">Regístrate Aquí</a>
    </p>
{% endblock %}

{% block scripts %}
    <script>
        function hideAchievement() {
            const toast = document.getElementById('toast-achievement');
            if (!toast) return;
            toast.style.opacity = '0';
            toast.style.transform = 'translateY(-20px)';
            setTimeout(() => toast.remove(), 500);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const toast = document.getElementById('toast-achievement');
            if (!toast) return;
            setTimeout(hideAchievement, 4000);
            toast.style.pointerEvents = 'auto';
        });
    </script>
{% endblock %}
